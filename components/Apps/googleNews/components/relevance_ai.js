const axios = require('axios');
require('dotenv').config();

const apiKey = process.env.RELEVANCE_API_KEY;

const message = `
[
    "Laut Polizei war ein 35-jähriger Autolenker aus Deutschland nach einer gut einstündigen Fahrpause bei der Raststation Eben entgegen die Fahrtrichtung als Geisterfahrer wieder auf die Autobahn aufgefahren. Nach etwa einem Kilometer prallte der Mann frontal gegen den Pkw eines 32-jährigen Pongauers.Bei dem Unfall wurden der Deutsche, seine 20-jährige Beifahrerin und der Österreicher verletzt. Die Polizei führten mit beiden Lenkern einen Alkotest durch. Der Test verlief bei dem Deutschen negativ, beim 32-Jährigen ergab er einen Wert von 0,3 Promille. Die drei Verletzten wurden nach der Erstversorgung mit der Rettung ins Krankenhaus gebracht.Bereits Mittwochfrüh hatte sich auf der Tauernautobahn bei Kuchl (Tennengau) ein Geisterfahrerunfall mit zwei Verletzten ereignet. Wie sich mittlerweile herausgestellt hat, dürfte eine 81-jährige Autolenkerin bei Golling falsch auf die A10 aufgefahren sein. Die Frau war rund neun Kilometer entgegen der Fahrtrichtung auf der Überholspur unterwegs, bis sie mit dem SUV eines 19-jährigen Ungarn kollidierte. Der Unfall hatte für umfangreiche Staus im Frühverkehr und im Anreiseverkehr in die Skigebiete gesorgt.(APA/Red)",
    "\n            Den schweren Verkehrsunfall auf der Tauernautobahn bei Kuchl Mittwochfrüh hat eine 81-jähriger Lenkerin aus dem Pongau ausgelöst. Sie rammte den Wagen eines 19-jährigen Ungarn.\n         Ein Kfz-Sachverständiger untersuchte die Unfallstelle und kam zu dem Ergebnis.Die Frau fuhr – vermutlich bei Golling (Tennengau) – in falscher Richtung auf die Autobahn auf. So habe sie den  Zusammenstoß mit einem anderen Pkw verursacht, sagt der gerichtlich beeidete Sachverständige Gerhard Kronreif. Die Frau sei rund neun Kilometer entgegen der Fahrtrichtung auf der Überholspur unterwegs gewesen, bis sie mit dem SUV eines 19-jährigen Ungarn kollidierte.Der Unfall sorgte für umfangreiche Staus im Frühverkehr und im Anreiseverkehr in die Skigebiete.red, salzburg.ORF.at",
    "\n                                            \n                            \n                            0                        \n                                    \n            Veröffentlicht: 29. Dezember 2023 10:00             Uhr\n                            \n                Aktualisiert: 29. Dezember 2023 10:23                     Uhr\n                    \n        Rund zwei Stunden komplett gesperrt war vergangene Nacht die A10 zwischen Eben und Altenmarkt nach einem Geisterfahrer-Unfall mit drei Verletzten. Erst am Mittwoch kam es auf der A10 bei Kuchl zu einem Geisterfahrer-Unfall.    Die Tauernautobahn (A10) ist in der Nacht auf Freitag zwischen Eben und Altenmarkt (beides Pongau) für längere Zeit in beide Fahrtrichtungen gesperrt worden. Laut Polizei war ein Autolenker aus Deutschland (35) nach einer gut einstündigen Fahrpause bei der Raststation Eben entgegen der Fahrtrichtung als Geisterfahrer wieder auf die Autobahn aufgefahren. Nach etwa einem Kilometer prallte das Fahrzeug frontal gegen den Pkw eines 32-jährigen Pongauers.Bei dem Unfall wurden der Deutsche, seine 20-jährige Beifahrerin und der Pongauer verletzt. Die Polizei führten mit beiden Lenkern einen Alko-Test durch. Dieser verlief beim Deutschen negativ und beim 32-Jährigen ergab er einen Wert von 0,3 Promille. Die drei Verletzten wurden nach der Erstversorgung mit der Rettung ins Krankenhaus gebracht.**Einsatz 29.12.2023**Die Freiwillige Feuerwehr Altenmarkt stand mit 27 Mann im Einsatz. Zur Unterstützung mit ausgerückt ist die Feuerwehr Eben im Pongau.Bereits Mittwochfrüh hatte sich auf der A10 bei Kuchl (Tennengau) ein Geisterfahrerunfall mit zwei Verletzten ereignet. Wie sich mittlerweile herausgestellt hat, dürfte eine 81-jährige Autolenkerin bei Golling falsch auf die A10 aufgefahren sein. Die Frau war rund neun Kilometer entgegen der Fahrtrichtung auf der Überholspur unterwegs, bis sie mit dem SUV eines 19-jährigen Ungarn kollidierte.Der Unfall hatte für umfangreiche Staus im Frühverkehr und im Anreiseverkehr in die Skigebiete gesorgt.\n        Aufgerufen am 30.12.2023 um 07:45 auf https://www.salzburg24.at/news/salzburg/pongau/a10-geisterfahrer-unfall-zwischen-altenmarkt-und-eben-fordert-verletzte-150842416    \n        Um diese Inhalte anzuzeigen, müssen Sie der Datenerfassung durch [VENDOR_NAME] zustimmen.\n        [VENDOR_NAME] wird Ihre Daten zu Mess- und Personalisierungszwecken erfassen.\n        Durch das Laden der Inhalte erklären Sie sich mit den Datenschutzbestimmungen\n        von [VENDOR_NAME] einverstanden.\n    \n                                    Es gibt noch keine Kommentare zu diesem Artikel. Starte die Diskussion.\n                                \n                Um dir das bestmögliche Erlebnis zu bieten, verwendet unsere Website Cookies. Wir haben jedoch\n                festgestellt, dass Cookies in deinem Browser derzeit deaktiviert sind. Bitte aktiviere die Cookies, um\n                alle Funktionen unserer Website nutzen zu können. Durch das Aktivieren von Cookies genießt du ein personalisierteres und reibungsloseres Erlebnis auf\n                unserer Website.\n            ",
    "Bitte aktualisieren Sie Ihre OÖ Nachrichten App, um die neuesten Funktionen und Verbesserungen zu erhalten.\n      Diese E-Mail-Adresse ist bereits registriert! \n      Der Account wurde am  zuletzt verwendet.Es wird ein Code an diese E-Mail-Adresse gesendet. Sie werden anschließend zur Eingabe dieses Codes aufgefordert und können dann ein neues Passwort eingeben.\n      \n      Diese Telefonnummer ist bereits registriert! \n      Der Account wurde am  zuletzt verwendet.Es wird ein Code an diese Telefonnummer gesendet. Sie werden anschließend zur Eingabe dieses Codes aufgefordert und können dann ein neues Passwort eingeben.\n      \n     \tMit Verwendung der Funktion \"Anmelden mit Mediakey\" stimmen Sie den AGB ausdrücklich zu.\n               \n               \n               \n     \n          Mit Ihrer Registrierung nehmen Sie die Datenschutzhinweise der OÖ Nachrichten zur Kenntnis.\n      \n          Mit Ihrer Anmeldung erklären Sie sich mit unseren AGB einverstanden.\n      Laut Polizei war ein 35-jähriger Autolenker aus Deutschland nach einer gut einstündigen Fahrpause bei der Raststation Eben entgegen die Fahrtrichtung als Geisterfahrer wieder auf die Autobahn aufgefahren. Nach etwa einem Kilometer prallte der Mann frontal gegen den Pkw eines 32-jährigen Pongauers.Bei dem Unfall wurden der Deutsche, seine 20-jährige Beifahrerin und der Österreicher verletzt. Die Polizei führten mit beiden Lenkern einen Alkotest durch. Der Test verlief bei dem Deutschen negativ, beim 32-Jährigen ergab er einen Wert von 0,3 Promille. Die drei Verletzten wurden nach der Erstversorgung mit der Rettung ins Krankenhaus gebracht.Bereits Mittwochfrüh hatte sich auf der Tauernautobahn bei Kuchl (Tennengau) ein Geisterfahrerunfall mit zwei Verletzten ereignet. Wie sich mittlerweile herausgestellt hat, dürfte eine 81-jährige Autolenkerin bei Golling falsch auf die A10 aufgefahren sein. Die Frau war rund neun Kilometer entgegen der Fahrtrichtung auf der Überholspur unterwegs, bis sie mit dem SUV eines 19-jährigen Ungarn kollidierte. Der Unfall hatte für umfangreiche Staus im Frühverkehr und im Anreiseverkehr in die Skigebiete gesorgt.\n\t\t\t\tLesen Sie die tagesaktuelle ePaper-Ausgabe der OÖNachrichten - jetzt gleich digital durchblättern!\n    \t\tMit einem Klick auf das “Merken”-Symbol fügen Sie ein Thema zu Ihrer Merkliste hinzu. Klicken Sie auf den Begriff, um alle Artikel zu einem Thema zu sehen.Für Ihre gemerkten Themen wurden \n    \n     neue Artikel gefunden.\n    \n      info Mit dem Klick auf das Icon fügen Sie das Schlagwort zu Ihren Themen hinzu.\n    \n      info\n      Mit dem Klick auf das Icon öffnen Sie Ihre \"meine Themen\" Seite. Sie haben  von 15 Schlagworten gespeichert und müssten Schlagworte entfernen.\n      info Mit dem Klick auf das Icon entfernen Sie das Schlagwort aus Ihren Themen.\n    \n      Fügen Sie das Thema zu Ihren Themen hinzu. \n    ",
    "info© APA/FF KUCHLErst in den frühen Morgenstunden wurden beide Fahrbahnen wieder freigegeben. 12/29/2023, 04:56 AM \nDie Tauernautobahn (A10) ist in der Nacht auf Freitag in Salzburg zwischen Eben und Altenmarkt für längere Zeit in beide Fahrtrichtungen gesperrt worden. Grund war laut Ö3 ein schwerer Verkehrsunfall. In den frühen Morgenstunden wurden beide Fahrbahnen wieder freigegeben. ( Agenturen, mod ) | 12/29/2023, 04:56 AM Zur Startseite"
]
`;

// Async function to perform the POST request
async function triggerRelAi(text) {
    console.log("Длина вводного текста в Relevance:", text.length);
    const url = "https://api-d7b62b.stack.tryrelevance.com/latest/studios/efdc3268-1405-4de3-9b9c-b7b18c0e6cfb/trigger_limited";
    const data = {
        params: {
            article_texts_all: text
        },
        project: "6f54abdd0f8d-4e58-9eb0-42c79d6a225f"
    };
    const config = {
        headers: {
            "Content-Type": "application/json"
        }
    };

    try {
        const response = await axios.post(url, data, config);
        // console.log('Response from Relevance:', response.data);
        return response.data.output.answer;
    } catch (error) {
        console.error('Error in triggerRelAi:', error.message);
        throw error.message; // Re-throw the error for the caller to handle
    }
}
// triggerLimitedAPI(message);



module.exports = {
    triggerRelAi,
};
