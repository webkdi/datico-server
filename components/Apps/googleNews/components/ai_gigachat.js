const axios = require('axios');
const https = require('https');
const { v4: uuidv4 } = require('uuid');
require('dotenv').config();

let tokenCache = {
    token: null,
    expiresAt: null
};

async function getAccessToken() {
    const currentTime = Date.now();

    // Check if the token is still valid
    if (tokenCache.token && tokenCache.expiresAt > currentTime + 5 * 60 * 1000) {
        return tokenCache.token;
    }

    // If no valid token, request a new one
    const url = 'https://ngw.devices.sberbank.ru:9443/api/v2/oauth';
    const clientId = process.env.GIGACHAT_CLIENT_ID;
    const clientSecret = process.env.GIGACHAT_CLIENT_SECRET;
    const authData = Buffer.from(`${clientId}:${clientSecret}`).toString('base64');
    const rqUID = uuidv4();
    const data = 'scope=GIGACHAT_API_PERS';

    try {
        const response = await axios.post(url, data, {
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'Authorization': `Basic ${authData}`,
                'Accept': 'application/json',
                'RqUID': rqUID
            },
            httpsAgent: new https.Agent({ rejectUnauthorized: false })
        });

        // Update the cache with the new token and expiration time
        const expiresIn = 30 * 60 * 1000; // 30 minutes
        tokenCache.token = response.data.access_token;
        tokenCache.expiresAt = currentTime + expiresIn;

        return tokenCache.token;
    } catch (error) {
        console.error('Error fetching access token:', error.response ? error.response.data : error.message);
    }
}

async function generateChatResponse(token, messages) {
    const url = 'https://gigachat.devices.sberbank.ru/api/v1/chat/completions';
    const data = {
        model: "GigaChat",
        messages: messages,
        stream: false,
        repetition_penalty: 1
    };

    try {
        const response = await axios.post(url, data, {
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            },
            httpsAgent: new https.Agent({ rejectUnauthorized: false }) // Bypass SSL
        });

        const output = response.data.choices[0].message.content;
        return output;
    } catch (error) {
        console.error('Error generateChatResponse:', error.response ? error.response.data : error.message);
    }
}

// Function to build a role-based message array for GigaChat
function buildMessages(articleText) {
    const systemMessage = {
        role: "system",
        content: `
        –¢—ã –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä –ø–æ —Å–æ—Ü—Å–µ—Ç—è–º –∏ –≤–µ–¥–µ—à—å –±–ª–æ–≥ –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏. –¢–µ–±–µ –±—É–¥–µ—Ç –¥–∞–Ω [–¢–ï–ö–°–¢]. –ù–∞ –æ—Å–Ω–æ–≤–µ [–¢–ï–ö–°–¢] –Ω–∞–ø–∏—à–∏ –ö–û–†–û–¢–ö–ò–ô –ø–æ—Å—Ç –¥–ª—è –¢–µ–ª–µ–≥—Ä–∞–º–∞ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ 900 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—ã) –Ω–∞ –†–£–°–°–ö–û–ú –Ø–ó–´–ö–ï.

        –ï—Å–ª–∏ [–¢–ï–ö–°–¢] –Ω–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –ø–µ—Ä–µ–≤–µ–¥–∏ –µ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.

        –ù–∞—á–Ω–∏ –ø–æ—Å—Ç —Å —è—Ä–∫–æ–π, —Ü–µ–ø–ª—è—é—â–µ–π —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–≤–ª–µ—á–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª–µ–π. –ó–∞—Ç–µ–º –∏–∑–ª–æ–∂–∏ –æ—Å–Ω–æ–≤–Ω—É—é –∏–¥–µ—é [–¢–ï–ö–°–¢] –≤ 2-3 –∞–±–∑–∞—Ü–∞—Ö. –ò–∑–±–µ–≥–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–ª–æ–≤ "–ó–∞–≥–æ–ª–æ–≤–æ–∫" –∏ "–†–µ–∑—é–º–µ". –¢–∞–∫–∂–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–≤—ã—á–∫–∏ (") –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏ —Ç–µ–∫—Å—Ç–µ.

        –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç–æ–π –º–æ–ª–æ–¥–µ–∂–Ω—ã–π —è–∑—ã–∫, –¥–æ–±–∞–≤—å –Ω–µ–º–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏ –∏ —Å–º–∞–π–ª–∏–∫–æ–≤. –ü–æ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—á–µ 900 —Å–∏–º–≤–æ–ª–æ–≤!

        –ù–ï —É–ø–æ–º–∏–Ω–∞–π "–≤ —ç—Ç–æ–º —Ç–µ–∫—Å—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–æ" –∏–ª–∏ "–≤ —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ —Ç–æ–º, –∫–∞–∫...".

        **–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ [–¢–ï–ö–°–¢] —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:
        - –ü—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å", "–ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ", "–∫—É–ø–∏—Ç–µ —Å–µ–π—á–∞—Å").
        - –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö, —É—Å–ª—É–≥–∞—Ö, –ø–æ–¥–ø–∏—Å–∫–∞—Ö, –∏–ª–∏ —Ü–µ–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —É—Å–ª—É–≥–∏ —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –ø—Ä–æ–±–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º).
        - –í–æ—Å—Ö–≤–∞–ª–µ–Ω–∏–µ –∏–ª–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –æ –ª–∏—á–Ω–æ—Å—Ç–∏, –º–µ—Å—Ç–µ, –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–µ —Å —Ü–µ–ª—å—é –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Å—Ç–æ—Ä–∂–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –æ –ù–∏—Ü—Ü–µ).
        - –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ñ—Ä–∞–∑—ã, –ø–æ–±—É–∂–¥–∞—é—â–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, –∏–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Å–ª—É–≥–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ß–∏—Ç–∞–π—Ç–µ –¥–∞–ª—å—à–µ —Å GEOplus 30 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ", "—É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã?").
        - –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∞–ø–µ–ª–ª—è—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏–ª–∏ —É—Å–ª—É–≥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ –ø—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ—Å—Ç–∞–ª—å–≥–∏–∏ –∏–ª–∏ –∏–¥–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ —Å–ª–µ–¥—É—é—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ –∏–ª–∏ –ø–æ–∫—É–ø–∫–µ).

        –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –Ω–∞–ø–∏—à–∏: "–≠—Ç–æ —Ä–µ–∫–ª–∞–º–∞" –∏–ª–∏ "–¢–µ–º–∞ –Ω–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è".
        `
    };

    const userMessage = {
        role: "user",
        content: `[–¢–ï–ö–°–¢] ${articleText}`
    };

    return [systemMessage, userMessage];
}

function buildTitlePrompt(articleText) {
    const systemMessage = {
        role: "system",
        content: '–¢—ã –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä –ø–æ —Å–æ—Ü—Å–µ—Ç—è–º. –¢–µ–±–µ –±—É–¥–µ—Ç –¥–∞–Ω [–¢–ï–ö–°–¢]. –ò–∑ [–¢–ï–ö–°–¢] –Ω–∞–ø–∏—à–∏ —è—Ä–∫–∏–π, –≤—ã–∑—ã–≤–∞—é—â–∏–π –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ –º–∞–∫—Å–∏–º—É–º 2 —Å–ª–æ–≤. –ü—Ä–∏–º–µ—Ä: [–¢–ï–ö–°–¢] """–ë—É—Ä—ã–µ –≤–æ–¥–æ—Ä–æ—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤ –±–æ–ª–µ–∑–Ω–∏ –ü–∞—Ä–∫–∏–Ω—Å–æ–Ω–∞ üåä\n\n–£—á—ë–Ω—ã–µ –∏–∑ –Ø–ø–æ–Ω–∏–∏ üáØüáµ —Å–¥–µ–ª–∞–ª–∏ –∫—Ä—É—Ç–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±–æ—Ä—å–±–µ —Å –±–æ–ª–µ–∑–Ω—å—é –ü–∞—Ä–∫–∏–Ω—Å–æ–Ω–∞ üß†. –û–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç—ã –≤ –±—É—Ä—ã—Ö –º–æ—Ä—Å–∫–∏—Ö –≤–æ–¥–æ—Ä–æ—Å–ª—è—Ö üåø, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ Ecklonia cava, –º–æ–≥—É—Ç –∑–∞—â–∏—â–∞—Ç—å –Ω–µ–π—Ä–æ–Ω—ã –æ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π üõ°Ô∏è. –≠—Ç–∏ —Å—É–ø–µ—Ä-–ø–æ–ª–µ–∑–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É—é—Ç —Å–≤–æ–±–æ–¥–Ω—ã–µ —Ä–∞–¥–∏–∫–∞–ª—ã üå±, –∫–æ—Ç–æ—Ä—ã–µ –∞—Ç–∞–∫—É—é—Ç –∫–ª–µ—Ç–∫–∏ –∏ –≤—ã–∑—ã–≤–∞—é—Ç –±–æ–ª–µ–∑–Ω—å üß¨.\n\n–í —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ –Ω–∞ –º—ã—à–∞—Ö üê≠, –∫–æ—Ç–æ—Ä—ã–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –¥–∞–≤–∞–ª–∏ –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç—ã –∏–∑ –≤–æ–¥–æ—Ä–æ—Å–ª–µ–π, —É—á—ë–Ω—ã–µ –∑–∞–º–µ—Ç–∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π üèÉ. –í –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö üî¨ –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ —Ñ–µ—Ä–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –≤—Ä–µ–¥–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤, —Ä–∞–∑—Ä—É—à–∞—é—â–∏—Ö –Ω–µ–π—Ä–æ–Ω—ã üí•. –•–æ—Ç—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –µ—â—ë –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±—É—Ä—ã—Ö –≤–æ–¥–æ—Ä–æ—Å–ª–µ–π –≤ —Ä–∞—Ü–∏–æ–Ω üçΩÔ∏è —É–∂–µ —Å–µ–π—á–∞—Å –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ—Ç–ª–∏—á–Ω—ã–º —à–∞–≥–æ–º –¥–ª—è –∑–∞—â–∏—Ç—ã –º–æ–∑–≥–∞ –∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –±–æ–ª–µ–∑–Ω–∏ –ü–∞—Ä–∫–∏–Ω—Å–æ–Ω–∞ üí°.\n\n–¢–∞–∫ —á—Ç–æ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ –≤ —Å–≤–æ—ë –ø–∏—Ç–∞–Ω–∏–µ, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç—Ç–∏ —á—É–¥–æ-–≤–æ–¥–æ—Ä–æ—Å–ª–∏! üíö""" –¢–≤–æ–π –æ—Ç–≤–µ—Ç: –í–æ–¥–æ—Ä–æ—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤ –ü–∞—Ä–∫–∏–Ω—Å–æ–Ω–∞'
    };

    const userMessage = {
        role: "user",
        content: `[–¢–ï–ö–°–¢] ${articleText}`
    };

    return [systemMessage, userMessage];
}

async function getPostOutOfArticle(articleText) {
    const token = await getAccessToken();
    const messages = buildMessages(articleText);
    if (token) {
        const res = await generateChatResponse(token, messages);
        return res;
    }
}

async function shortenArticle(articleText) {
    const token = await getAccessToken();
    const systemMessage = {
        role: "system",
        content: `
        –¢—ã ‚Äî –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä –ø–æ —Å–æ—Ü—Å–µ—Ç—è–º –∏ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫. –ü–æ–ª—É—á–∏–≤ [–¢–ï–ö–°–¢], —Å–æ–∫—Ä–∞—Ç–∏ –µ–≥–æ –¥–æ –æ–¥–Ω–æ–≥–æ –∞–±–∑–∞—Ü–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∫–ª—é—á–µ–≤—ã–µ –º—ã—Å–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ª–∞–∫–æ–Ω–∏—á–Ω–æ. –ï—Å–ª–∏ [–¢–ï–ö–°–¢] –Ω–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –ø–µ—Ä–µ–≤–µ–¥–∏ –µ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π. –û–≥—Ä–∞–Ω–∏—á—å —Ç–µ–∫—Å—Ç 900 —Å–∏–º–≤–æ–ª–∞–º–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—ã.

        –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∞–≤—Ç–æ—Ä–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—Ä–∞–∑—ã —Ç–∏–ø–∞ '–ê–≤—Ç–æ—Ä –ø–∏—à–µ—Ç...' –∏–ª–∏ '–°—Ç–∞—Ç—å—è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç...'. –ü–∏—à–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞, –∫–∞–∫ –±—É–¥—Ç–æ —Ç—ã —Å–∞–º –∞–≤—Ç–æ—Ä, —Ñ–æ–∫—É—Å–∏—Ä—É—è—Å—å –Ω–∞ —Å—É—Ç–∏ –∏ –∏–∑–±–µ–≥–∞—è –ø–æ–≤—Ç–æ—Ä–æ–≤.
        `
    };
    const userMessage = {
        role: "user",
        content: `–°–æ–∫—Ä–∞—Ç–∏ –¥–æ 1 –∞–±–∑–∞—Ü–∞ [–¢–ï–ö–°–¢]: ${articleText}`
    };
    if (token) {
        const res = await generateChatResponse(token, [systemMessage, userMessage]);
        console.log(res);
        return res;
    } else {
        throw new Error("Failed to get access token.");
    }
}


// Exported function to be used in other modules
async function getTitleOutIfPost(articleText) {
    const token = await getAccessToken();
    const messages = buildTitlePrompt(articleText);
    if (token) {
        const res = await generateChatResponse(token, messages);
        console.log(res);
        return res;
    }
}

// (async () => await getTitleOutIfPost("–ö–æ—Ñ–µ –∏ —á–∞–π —Å –∫–æ—Ñ–µ–∏–Ω–æ–º —É—Å–∫–æ—Ä—è—é—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º üöÄ, –∫–∞–∫ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∞ –≤—Ä–∞—á-—Ç–µ—Ä–∞–ø–µ–≤—Ç –ï–ª–µ–Ω–∞ –£—Å—Ç–∏–Ω–æ–≤–∞. –ö–æ—Ñ–µ–∏–Ω —Ç–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º, —É–ª—É—á—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–µ—Ä–≤–æ–≤ –∏ –º—ã—à—Ü, —É—Å–∫–æ—Ä—è–µ—Ç —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ –∏ –æ–±–ª–∞–¥–∞–µ—Ç –º–æ—á–µ–≥–æ–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º. –ê –∂–≥—É—á–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏–º–±–∏—Ä–Ω–æ–º —á–∞–µ, —É–ª—É—á—à–∞—é—Ç –∫–∞–ø–∏–ª–ª—è—Ä–Ω–æ–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ, —Ä–∞—Å—à–∏—Ä—è—è —Å–æ—Å—É–¥—ã –∏ —É–ª—É—á—à–∞—è –ø–∏—Ç–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–æ–≤ –∏ —Ç–∫–∞–Ω–µ–π, –≤–∫–ª—é—á–∞—è –º–æ–∑–≥, —Ä—É–∫–∏ –∏ –Ω–æ–≥–∏. –≠—Ç–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º üí™üèª. –¢–∞–∫ —á—Ç–æ –ø–µ–π—Ç–µ –∫–æ—Ñ–µ –∏ —á–∞–π, –∞ —Ç–∞–∫–∂–µ –∏–º–±–∏—Ä–Ω—ã–π —á–∞–π, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤!"))();

module.exports = { getPostOutOfArticle, getTitleOutIfPost, shortenArticle };